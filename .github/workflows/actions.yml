# Workflow для вызова кастомных экшенов
#- Первый Использует пеерданный параметр для присвоения переменной
#- Второй создает Issue при падении pull в ветку develop (дублирует существующий шаг )

on:
  pull_request:
    branches:
      - develop
jobs:
  testing-action:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: ./.github/actions/hello
        id: hello
        with:
          who-to-greet: "World"
      - run: |
          echo "Time: ${{steps.hello.outputs.time}}"
          echo $HELLO
      - name: Open Issue by custom action # run only is smt broken in this pipeline
#        if: failure()
        uses: ./.github/actions/issue
        id: issue
        with:
          token: ${{secrets.GITHUB_TOKEN}}
          title: "Automated issue for commit: ${{github.sha}} by Custom action"
          body: "This issue was automatically created by the GitHub Action workflow **${{github.workflow}}**. \n\n The commit hash was: _${{github.sha}}_."
          assignees: "${{github.event.pull_request.user.login}}"
